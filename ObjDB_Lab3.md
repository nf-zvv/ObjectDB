# Лабораторная работа №3

## Задание

Реализовать методы (для одного класса):

1. Получение списка всех записей;
2. Получение списка всех зависимых записей (один-ко-многим);
3. Получение одной записи по первичному ключу;
4. Сохранение одной записи;
5. обновление одной записи;
6. Удаление  одной записи.

## Примеры

Примеры приведены в официальной документации [persist_access](http://docs.oracle.com/cd/E17076_03/html/gsg/JAVA/persist_access.html) и  [dpl_example](http://docs.oracle.com/cd/E17076_03/html/gsg/JAVA/dpl_example.html)

## Пояснения

### Окружение (Environment)

Окружение требуется для приложений, созданных с использованием DPL.

Окружение - это инкапсуляция одной или нескольких баз данных. 
Вы открываете окружение, а затем базы данных в этой среде.

Окружение предлагает множество функций, которые не может предложить 
обычная база данных:

1. Файлы с несколькими базами данных.

В одном физическом файле можно хранить несколько БД. 
Это необходимо, когда приложение работает с несколькими БД.

2. Многопоточная и многопроцессорная поддержка

Несколько потоков и/или процессов могут обращаться к БД.
Кэширование.

3. Транзакционная обработка

Идентификаторы транзакции

4. Репликация (высокая доступность)

БД с одним мастером  и несколькими реплицированными read-only копиями.

5. Логгирование

Ведение журнала с опережением записи. 
Высокая степень восстановления в случае сбоя приложения или системы.


### Хранение данных

Существует два способа работы с данными (API):

1. Direct Persistent Layer (DPL)
2. Base database API (java)

### Работа с Berkeley DB

1. Задать параметры подключени к окружению
2. Получить из окружения нужную базы (по имени)
 - создать хранилище для объектов (Entity Store)
 - DML (Data Manipulation Language) операции (SELECT, INSERT, UPDATE, DELETE, MERGE)
 - CRUDL (Create, Read, Update, Delete, List)
 - ...
3. Закрыть соединение (окружение)


### Подключение окружения и хранилища

```
private static File envHome = new File("./JEDB");

...

EnvironmentConfig envConfig = new EnvironmentConfig();
StoreConfig storeConfig = new StoreConfig();

envConfig.setAllowCreate(true);
storeConfig.setAllowCreate(true);

// Open the environment and entity store
envmnt = new Environment(envHome, envConfig);
store = new EntityStore(envmnt, "EntityStore", storeConfig);
```


